<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‰´ìŠ¤ ì¸ì‚¬ì´íŠ¸</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Malgun Gothic', sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f8f9fa;
        }

        .navbar {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .navbar-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .navbar-logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: #667eea;
            cursor: pointer;
        }

        .navbar-buttons {
            display: flex;
            gap: 15px;
        }

        .btn-nav {
            padding: 10px 20px;
            background: white;
            color: #667eea;
            border: 2px solid #667eea;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-nav:hover {
            background: #667eea;
            color: white;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        .page-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .page-header h1 {
            font-size: 2.5rem;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .page-header p {
            font-size: 1.1rem;
            color: #718096;
        }

        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #e2e8f0;
        }

        .tab {
            padding: 15px 30px;
            background: transparent;
            border: none;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            color: #718096;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .news-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 25px;
        }

        /* ê¸ˆì£¼ì˜ ë‰´ìŠ¤ ì „ìš© ê·¸ë¦¬ë“œ (5ì—´) */
        .weekly-news-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 20px;
            max-width: 100%;
        }

        /* ë­í‚¹ ë°°ì§€ */
        .rank-badge {
            position: absolute;
            top: -10px;
            left: -10px;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: 700;
            z-index: 10;
        }

        .rank-badge.gold {
            font-size: 2rem;
        }

        .rank-badge.silver {
            font-size: 2rem;
        }

        .rank-badge.bronze {
            font-size: 2rem;
        }

        .rank-badge.number {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            font-size: 1.2rem;
            width: 40px;
            height: 40px;
        }

        /* ê¸ˆì£¼ì˜ ë‰´ìŠ¤ ì¹´ë“œ */
        .weekly-news-card {
            position: relative;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .weekly-news-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.2);
        }

        .weekly-news-card.rank-1 {
            border-color: #FFD700;
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.3);
        }

        .weekly-news-card.rank-2 {
            border-color: #C0C0C0;
            box-shadow: 0 6px 20px rgba(192, 192, 192, 0.3);
        }

        .weekly-news-card.rank-3 {
            border-color: #CD7F32;
            box-shadow: 0 6px 20px rgba(205, 127, 50, 0.3);
        }

        .news-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s;
            cursor: pointer;
        }

        .news-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(0,0,0,0.15);
        }

        .news-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .news-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 5px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .news-date {
            color: #718096;
            font-size: 0.9rem;
        }

        .news-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .news-source {
            color: #667eea;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        .summary {
            background: #f8f9fa;
            padding: 15px;
            border-left: 4px solid #667eea;
            border-radius: 4px;
            margin-bottom: 15px;
            font-size: 0.95rem;
            color: #4a5568;
            line-height: 1.6;
        }

        .news-stats {
            display: flex;
            gap: 15px;
            padding-top: 15px;
            border-top: 1px solid #e2e8f0;
            font-size: 0.9rem;
            color: #718096;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .loading {
            text-align: center;
            padding: 50px;
            font-size: 1.2rem;
            color: #667eea;
        }

        /* ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            overflow-y: auto;
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
        }

        .modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #2d3748;
        }

        .close {
            color: #718096;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            border: none;
            background: none;
        }

        .close:hover {
            color: #2d3748;
        }

        .modal-body {
            margin-bottom: 20px;
        }

        .news-content {
            line-height: 1.8;
            color: #4a5568;
            margin-bottom: 30px;
            white-space: pre-wrap;
        }

        .comments-section {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px solid #e2e8f0;
        }

        .comments-header {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: #2d3748;
        }

        .comment-form {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .comment-form input,
        .comment-form textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 1rem;
            margin-bottom: 10px;
        }

        .comment-form textarea {
            min-height: 80px;
            resize: vertical;
        }

        .btn-submit {
            padding: 10px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .comment-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .comment-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }

        .comment-author {
            font-weight: 700;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .comment-date {
            font-size: 0.85rem;
            color: #718096;
            margin-bottom: 10px;
        }

        .comment-content {
            color: #4a5568;
            line-height: 1.6;
        }

        .btn-delete {
            padding: 5px 10px;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 0.85rem;
            cursor: pointer;
            margin-top: 10px;
        }

        .admin-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn-admin {
            padding: 8px 16px;
            background: #f59e0b;
            color: white;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
        }

        .btn-admin:hover {
            background: #d97706;
        }

        @media (max-width: 1200px) {
            .weekly-news-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 900px) {
            .weekly-news-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .news-grid {
                grid-template-columns: 1fr;
            }

            .weekly-news-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
<!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
<nav class="navbar">
    <div class="navbar-content">
        <div class="navbar-logo" onclick="location.href='/'">ğŸ“Š InvestHub</div>
        <div class="navbar-buttons">
            <button class="btn-nav" onclick="location.href='/'">í™ˆìœ¼ë¡œ</button>
            <button class="btn-nav" onclick="location.href='/portfolio'">í¬íŠ¸í´ë¦¬ì˜¤ ë¹„êµ</button>
        </div>
    </div>
</nav>

<div class="container">
    <div class="page-header">
        <h1>ë‰´ìŠ¤ ì¸ì‚¬ì´íŠ¸</h1>
        <p>ì‹¤ì‹œê°„ ê¸ˆìœµ ë‰´ìŠ¤ì™€ AI ìš”ì•½ì„ í™•ì¸í•˜ì„¸ìš”</p>
    </div>

    <!-- íƒ­ ë©”ë‰´ -->
    <div class="tabs">
        <button class="tab active" onclick="switchTab('daily')">ë°ì¼ë¦¬ ë‰´ìŠ¤</button>
        <button class="tab" onclick="switchTab('weekly')">ê¸ˆì£¼ì˜ ë‰´ìŠ¤</button>
        <button class="tab" onclick="switchTab('archive')">ì•„ì¹´ì´ë¸Œ</button>
    </div>

    <!-- ë°ì¼ë¦¬ ë‰´ìŠ¤ íƒ­ -->
    <div id="daily-tab" class="tab-content active">
        <div id="daily-news" class="news-grid">
            <div class="loading">ë°ì¼ë¦¬ ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
        </div>
    </div>

    <!-- ê¸ˆì£¼ì˜ ë‰´ìŠ¤ íƒ­ -->
    <div id="weekly-tab" class="tab-content">
        <div id="weekly-news" class="weekly-news-grid">
            <div class="loading">ê¸ˆì£¼ì˜ ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
        </div>
    </div>

    <!-- ì•„ì¹´ì´ë¸Œ íƒ­ -->
    <div id="archive-tab" class="tab-content">
        <div id="archive-news" class="news-grid">
            <div class="loading">ì•„ì¹´ì´ë¸Œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
        </div>
    </div>
</div>

<!-- ë‰´ìŠ¤ ìƒì„¸ ëª¨ë‹¬ -->
<div id="newsModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2 class="modal-title" id="modal-title"></h2>
            <button class="close">&times;</button>
        </div>
        <div class="modal-body">
            <div id="modal-meta" style="margin-bottom: 20px;"></div>
            <div id="modal-summary" class="summary"></div>
            <div id="modal-content" class="news-content"></div>

            <!-- ê´€ë¦¬ì ë²„íŠ¼ (ì¡°ê±´ë¶€ í‘œì‹œ) -->
            <div id="admin-buttons" class="admin-buttons" style="display: none;">
                <button class="btn-admin" onclick="deleteNews()">ë‰´ìŠ¤ ì‚­ì œ</button>
            </div>

            <!-- ëŒ“ê¸€ ì„¹ì…˜ -->
            <div class="comments-section">
                <div class="comments-header">ğŸ’¬ ëŒ“ê¸€</div>

                <!-- ëŒ“ê¸€ ì‘ì„± í¼ -->
                <div class="comment-form">
                    <input type="text" id="comment-user-name" placeholder="ì´ë¦„" maxlength="50">
                    <textarea id="comment-content" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•˜ì„¸ìš”"></textarea>
                    <button class="btn-submit" onclick="submitComment()">ëŒ“ê¸€ ì‘ì„±</button>
                </div>

                <!-- ëŒ“ê¸€ ëª©ë¡ -->
                <div id="comment-list" class="comment-list"></div>
            </div>
        </div>
    </div>
</div>

<script>
    let currentNewsId = null;
    const isAdmin = false; // ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” ì„œë²„ì—ì„œ ê´€ë¦¬ì ì—¬ë¶€ë¥¼ ë°›ì•„ì™€ì•¼ í•¨

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ë°ì¼ë¦¬ ë‰´ìŠ¤ ë¡œë“œ
    window.addEventListener('DOMContentLoaded', () => {
        loadDailyNews();
    });

    // íƒ­ ì „í™˜
    function switchTab(tabName) {
        // ëª¨ë“  íƒ­ ë¹„í™œì„±í™”
        document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

        // ì„ íƒëœ íƒ­ í™œì„±í™”
        document.querySelector(`button[onclick="switchTab('${tabName}')"]`).classList.add('active');
        document.getElementById(`${tabName}-tab`).classList.add('active');

        // ë°ì´í„° ë¡œë“œ
        if (tabName === 'daily') {
            loadDailyNews();
        } else if (tabName === 'weekly') {
            loadWeeklyNews();
        } else if (tabName === 'archive') {
            loadArchiveNews();
        }
    }

    // ë°ì¼ë¦¬ ë‰´ìŠ¤ ë¡œë“œ
    async function loadDailyNews() {
        try {
            const response = await fetch('/api/news/daily');
            const newsList = await response.json();
            displayNews(newsList, 'daily-news');
        } catch (error) {
            console.error('ë°ì¼ë¦¬ ë‰´ìŠ¤ ë¡œë“œ ì‹¤íŒ¨:', error);
            document.getElementById('daily-news').innerHTML = '<div class="loading">ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</div>';
        }
    }

    // ê¸ˆì£¼ì˜ ë‰´ìŠ¤ ë¡œë“œ
    async function loadWeeklyNews() {
        try {
            const response = await fetch('/api/news/weekly-top');
            const newsList = await response.json();
            displayWeeklyNews(newsList);
        } catch (error) {
            console.error('ê¸ˆì£¼ì˜ ë‰´ìŠ¤ ë¡œë“œ ì‹¤íŒ¨:', error);
            document.getElementById('weekly-news').innerHTML = '<div class="loading">ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</div>';
        }
    }

    // ê¸ˆì£¼ì˜ ë‰´ìŠ¤ í‘œì‹œ (ë­í‚¹ í¬í•¨)
    function displayWeeklyNews(newsList) {
        const container = document.getElementById('weekly-news');

        if (!newsList || newsList.length === 0) {
            container.innerHTML = '<div class="loading">ë“±ë¡ëœ ë‰´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
            return;
        }

        // ìµœëŒ€ 10ê°œë¡œ ì œí•œ
        const top10 = newsList.slice(0, 10);

        // ë­í‚¹ ì•„ì´ì½˜ í•¨ìˆ˜
        function getRankBadge(rank) {
            if (rank === 1) return 'ğŸ‘‘'; // ê¸ˆê´€
            if (rank === 2) return 'ğŸ¥ˆ'; // ì€ê´€
            if (rank === 3) return 'ğŸ¥‰'; // ë™ê´€
            return rank; // 4-10ë“±ì€ ìˆ«ì
        }

        // ë­í¬ í´ë˜ìŠ¤ í•¨ìˆ˜
        function getRankClass(rank) {
            if (rank === 1) return 'rank-1';
            if (rank === 2) return 'rank-2';
            if (rank === 3) return 'rank-3';
            return '';
        }

        // ë°°ì§€ í´ë˜ìŠ¤ í•¨ìˆ˜
        function getBadgeClass(rank) {
            if (rank === 1) return 'gold';
            if (rank === 2) return 'silver';
            if (rank === 3) return 'bronze';
            return 'number';
        }

        container.innerHTML = top10.map((news, index) => {
            const rank = index + 1;
            return `
                <div class="weekly-news-card ${getRankClass(rank)}" onclick="showNewsDetail(${news.id})">
                    <div class="rank-badge ${getBadgeClass(rank)}">
                        ${getRankBadge(rank)}
                    </div>
                    <div class="news-header" style="margin-top: 15px;">
                        <span class="news-badge" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">TOP ${rank}</span>
                        <span class="news-date">${news.createdAt}</span>
                    </div>
                    <div class="news-title" style="font-size: 1rem; min-height: 60px;">${news.title}</div>
                    <div class="news-source">ğŸ“° ${news.source}</div>
                    <div class="news-stats">
                        <div class="stat-item">ğŸ‘ï¸ ${news.viewCount || 0}íšŒ</div>
                        <div class="stat-item">ğŸ’¬ ${news.commentCount || 0}ê°œ</div>
                    </div>
                </div>
            `;
        }).join('');
    }

    // ì•„ì¹´ì´ë¸Œ ë‰´ìŠ¤ ë¡œë“œ
    async function loadArchiveNews() {
        try {
            const response = await fetch('/api/news/archive?page=0&size=20');
            const data = await response.json();
            displayNews(data.content, 'archive-news');
        } catch (error) {
            console.error('ì•„ì¹´ì´ë¸Œ ë¡œë“œ ì‹¤íŒ¨:', error);
            document.getElementById('archive-news').innerHTML = '<div class="loading">ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</div>';
        }
    }

    // ë‰´ìŠ¤ ëª©ë¡ í‘œì‹œ
    function displayNews(newsList, containerId) {
        const container = document.getElementById(containerId);

        if (!newsList || newsList.length === 0) {
            container.innerHTML = '<div class="loading">ë“±ë¡ëœ ë‰´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
            return;
        }

        container.innerHTML = newsList.map(news => `
            <div class="news-card" onclick="showNewsDetail(${news.id})">
                <div class="news-header">
                    <span class="news-badge">${news.status === 'DAILY' ? 'ë°ì¼ë¦¬' : 'ì•„ì¹´ì´ë¸Œ'}</span>
                    <span class="news-date">${news.createdAt}</span>
                </div>
                <div class="news-title">${news.title}</div>
                <div class="news-source">ğŸ“° ${news.source}</div>
                ${news.summary ? `<div class="summary">${news.summary}</div>` : ''}
                <div class="news-stats">
                    <div class="stat-item">ğŸ‘ï¸ ${news.viewCount || 0}íšŒ</div>
                    <div class="stat-item">ğŸ’¬ ${news.commentCount || 0}ê°œ</div>
                </div>
            </div>
        `).join('');
    }

    // ë‰´ìŠ¤ ìƒì„¸ ë³´ê¸°
    async function showNewsDetail(newsId) {
        currentNewsId = newsId;

        try {
            // ë‰´ìŠ¤ ìƒì„¸ ì •ë³´ ê°€ì ¸ì˜¤ê¸° (ì¡°íšŒìˆ˜ ì¦ê°€)
            const response = await fetch(`/api/news/${newsId}`);
            const news = await response.json();

            // ëª¨ë‹¬ì— ë‰´ìŠ¤ ì •ë³´ í‘œì‹œ
            document.getElementById('modal-title').textContent = news.title;
            document.getElementById('modal-meta').innerHTML = `
                <div style="display: flex; justify-content: space-between; color: #718096;">
                    <span>ğŸ“° ${news.source}</span>
                    <span>${news.createdAt}</span>
                </div>
            `;
            document.getElementById('modal-summary').textContent = news.summary || '';
            document.getElementById('modal-content').textContent = news.content || 'ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.';

            // ê´€ë¦¬ì ë²„íŠ¼ í‘œì‹œ
            document.getElementById('admin-buttons').style.display = isAdmin ? 'flex' : 'none';

            // ëŒ“ê¸€ ë¡œë“œ
            loadComments(newsId);

            // ëª¨ë‹¬ ì—´ê¸°
            document.getElementById('newsModal').style.display = 'block';
        } catch (error) {
            console.error('ë‰´ìŠ¤ ìƒì„¸ ë¡œë“œ ì‹¤íŒ¨:', error);
            alert('ë‰´ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
    }

    // ëŒ“ê¸€ ë¡œë“œ
    async function loadComments(newsId) {
        try {
            const response = await fetch(`/api/news/${newsId}/comments`);
            const comments = await response.json();

            const commentList = document.getElementById('comment-list');
            if (comments.length === 0) {
                commentList.innerHTML = '<div style="text-align: center; color: #718096;">ì²« ëŒ“ê¸€ì„ ì‘ì„±í•´ë³´ì„¸ìš”!</div>';
                return;
            }

            commentList.innerHTML = comments.map(comment => `
                <div class="comment-item">
                    <div class="comment-author">${comment.userName}</div>
                    <div class="comment-date">${comment.createdAt}</div>
                    <div class="comment-content">${comment.content}</div>
                    ${isAdmin ? `<button class="btn-delete" onclick="deleteComment(${comment.id})">ì‚­ì œ</button>` : ''}
                </div>
            `).join('');
        } catch (error) {
            console.error('ëŒ“ê¸€ ë¡œë“œ ì‹¤íŒ¨:', error);
        }
    }

    // ëŒ“ê¸€ ì‘ì„±
    async function submitComment() {
        const userName = document.getElementById('comment-user-name').value.trim();
        const content = document.getElementById('comment-content').value.trim();

        if (!userName || !content) {
            alert('ì´ë¦„ê³¼ ëŒ“ê¸€ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            return;
        }

        try {
            const response = await fetch(`/api/news/${currentNewsId}/comments`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    userName: userName,
                    content: content
                })
            });

            if (response.ok) {
                alert('ëŒ“ê¸€ì´ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.');
                document.getElementById('comment-user-name').value = '';
                document.getElementById('comment-content').value = '';
                loadComments(currentNewsId);
            } else {
                alert('ëŒ“ê¸€ ì‘ì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        } catch (error) {
            console.error('ëŒ“ê¸€ ì‘ì„± ì‹¤íŒ¨:', error);
            alert('ëŒ“ê¸€ ì‘ì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
    }

    // ë‰´ìŠ¤ ì‚­ì œ (ê´€ë¦¬ì ì „ìš©)
    async function deleteNews() {
        if (!confirm('ì •ë§ ì´ ë‰´ìŠ¤ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            return;
        }

        try {
            const response = await fetch(`/api/news/admin/${currentNewsId}`, {
                method: 'DELETE'
            });

            if (response.ok) {
                alert('ë‰´ìŠ¤ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                closeModal();
                loadDailyNews();
            } else {
                alert('ë‰´ìŠ¤ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        } catch (error) {
            console.error('ë‰´ìŠ¤ ì‚­ì œ ì‹¤íŒ¨:', error);
            alert('ë‰´ìŠ¤ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
    }

    // ëŒ“ê¸€ ì‚­ì œ (ê´€ë¦¬ì ì „ìš©)
    async function deleteComment(commentId) {
        if (!confirm('ì •ë§ ì´ ëŒ“ê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
            return;
        }

        try {
            const response = await fetch(`/api/news/admin/comments/${commentId}`, {
                method: 'DELETE'
            });

            if (response.ok) {
                alert('ëŒ“ê¸€ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                loadComments(currentNewsId);
            } else {
                alert('ëŒ“ê¸€ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        } catch (error) {
            console.error('ëŒ“ê¸€ ì‚­ì œ ì‹¤íŒ¨:', error);
            alert('ëŒ“ê¸€ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
        }
    }

    // ëª¨ë‹¬ ë‹«ê¸°
    function closeModal() {
        document.getElementById('newsModal').style.display = 'none';
    }

    // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
    window.onclick = function(event) {
        const modal = document.getElementById('newsModal');
        if (event.target === modal) {
            closeModal();
        }
    }

    // ë‹«ê¸° ë²„íŠ¼ í´ë¦­
    document.querySelector('.close').addEventListener('click', closeModal);
</script>
</body>
</html>
