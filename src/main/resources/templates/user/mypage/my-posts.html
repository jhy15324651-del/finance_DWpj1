<th:block th:replace="content/layout/header-mypage :: header"></th:block>
<th:block th:replace="content/layout/header-mypage :: bodyheader"></th:block>

<div class="mypage-section">
    <h2>ğŸ“Œ ë‚´ê°€ ì‘ì„±í•œ ê²Œì‹œê¸€</h2>

    <div class="mypage-two-column">

        <!-- =====================
             ğŸŸ¢ í™œì„± ê²Œì‹œê¸€
        ====================== -->
        <div class="mypage-column alive">
            <h3>ğŸŸ¢ í™œì„± ê²Œì‹œê¸€</h3>

            <div th:if="${#lists.isEmpty(alivePosts)}" class="empty-message">
                í™œì„± ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.
            </div>

            <div th:each="p : ${alivePosts}">
                <a th:href="${p.link}" class="post-card-link">
                    <div class="post-card">

                        <span class="post-category" th:text="${p.category}"></span>

                        <div class="post-title" th:text="${p.title}"></div>

                        <div class="post-meta">
                            <span th:text="${#temporals.format(p.date,'yyyy.MM.dd')}"></span>
                            Â· ì¡°íšŒìˆ˜ <span th:text="${p.viewCount}"></span>
                        </div>
                    </div>
                </a>
            </div>
        </div>

        <!-- =====================
             ğŸ”´ ì‚­ì œëœ ê²Œì‹œê¸€
        ====================== -->
        <div class="mypage-column deleted">
            <h3>ğŸ”´ ì‚­ì œëœ ê²Œì‹œê¸€</h3>

            <div th:if="${#lists.isEmpty(deletedPosts)}" class="empty-message">
                ì‚­ì œëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.
            </div>

            <div class="post-card deleted"
                 th:each="p : ${deletedPosts}">

                <!-- ğŸ”´ ì‚­ì œ ì¹´ìš´íŠ¸ (ì—¬ê¸°!) -->
                <span class="delete-count"
                      th:if="${p.deleteRemainDays}"
                      th:text="${p.deleteRemainDays > 0
                    ? '[' + p.deleteRemainDays + 'ì¼ í›„ ì™„ì „ì‚­ì œ ì˜ˆì •]'
                    : '[ì˜¤ëŠ˜ ì™„ì „ì‚­ì œ ì˜ˆì •]'}">
                </span>

                <span class="post-category" th:text="${p.category}"></span>

                <div class="post-title deleted-title"
                     th:text="${p.title}">
                </div>

                <div class="post-meta">
                    ì‚­ì œì¼:
                    <span th:text="${#temporals.format(p.deletedAt,'yyyy.MM.dd')}"></span>
                </div>

                <a th:href="@{/content/restore-page/{id}(id=${p.id})}"
                   class="restore-btn">
                    ë³µêµ¬
                </a>
            </div>
        </div>

    </div>
</div>

<style>
    /* =====================
   ë ˆì´ì•„ì›ƒ (comment ê¸°ì¤€)
===================== */
    .mypage-two-column {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 32px;
        margin-top: 24px;
    }

    /* =====================
       ì»¬ëŸ¼ (comment ê¸°ì¤€)
    ===================== */
    .mypage-column {
        border-radius: 16px;
        padding: 20px;
    }

    .mypage-column.alive {
        background: #ffffff;
        border: 1px solid #eaeaea;
    }

    .mypage-column.deleted {
        background: #fafafa;
        border: 1px dashed #e0e0e0;
    }

    .mypage-column h3 {
        font-size: 18px;
        font-weight: 700;
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    /* =====================
       ì¹´ë“œ (comment-card ë§¤í•‘)
    ===================== */
    .post-card {
        background: #ffffff;
        border: 1px solid #eeeeee;
        border-radius: 12px;
        padding: 14px 16px;
        margin-bottom: 14px;
        transition: background 0.15s;
    }

    .post-card:hover {
        background: #f9f9ff;
    }

    .post-card-link {
        text-decoration: none;
        color: inherit;
        display: block;
    }

    /* ì‚­ì œ ì¹´ë“œ */
    .post-card.deleted {
        background: #ffffff;
        opacity: 0.8;
        cursor: default;
    }

    /* =====================
       ì¹´í…Œê³ ë¦¬ (comment-category ë§¤í•‘)
    ===================== */
    .post-category {
        display: inline-block;
        font-size: 12px;
        font-weight: 600;
        padding: 3px 8px;
        border-radius: 6px;
        background: #eef2ff;
        color: #4f46e5;
        margin-bottom: 6px;
    }

    /* =====================
       ì œëª© (comment-post-title ë§¤í•‘)
    ===================== */
    .post-title {
        font-weight: 600;
        font-size: 15px;
        color: #222;
        margin: 6px 0;
    }

    .post-title.deleted-title {
        color: #999;
        font-style: italic;
    }

    /* =====================
       ë©”íƒ€ ì •ë³´
    ===================== */
    .post-meta {
        font-size: 12px;
        color: #888;
    }

    /* =====================
       ì‚­ì œ ì¹´ìš´íŠ¸ (post ì „ìš© ìœ ì§€)
    ===================== */
    .delete-count {
        display: inline-block;
        margin-bottom: 6px;
        padding: 3px 8px;
        font-size: 12px;
        font-weight: 700;
        color: #fff;
        background-color: #ff4e4e;
        border-radius: 6px;
    }

    /* =====================
       ë³µêµ¬ ë²„íŠ¼
    ===================== */
    .restore-btn {
        display: inline-block;
        margin-top: 8px;
        font-size: 13px;
        color: #4f46e5;
        text-decoration: none;
    }

    .restore-btn:hover {
        text-decoration: underline;
    }

    /* =====================
       ë¹ˆ ìƒíƒœ
    ===================== */
    .empty-message {
        padding: 20px 0;
        text-align: center;
        color: #777;
    }

    /* =====================
    MyPage íƒ€ì´í‹€
 ===================== */
    .mypage-section > h2 {
        text-align: center;
        margin: 40px 0 32px;
        font-size: 28px;
        font-weight: 800;
        letter-spacing: -0.5px;
    }

    .mypage-section {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 24px 60px;
    }

</style>
