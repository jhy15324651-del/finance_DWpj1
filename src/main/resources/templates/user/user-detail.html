<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<!-- 1) head -->
<th:block th:replace="content/layout/header-main :: header-main"></th:block>

<body>

<!-- 2) body header (네비게이션 바) -->
<th:block th:replace="content/layout/header-main :: bodyheader"></th:block>

<div class="user-layout">

    <section class="user-profile-section">

        <div class="user-profile-header">
            <span class="user-nickname" th:text="${writer}"></span>
            <span class="user-suffix">님의 프로필</span>
        </div>

        <!-- 프로필 카드가 있을 때 -->
        <div th:if="${profile != null}"
             class="profile-card"
             th:onclick="'location.href=\'/info/' + ${profile.id} + '\';'">

            <div class="profile-card-inner">

                <!-- 왼쪽 텍스트 -->
                <div class="profile-text">

                    <!-- 좌상단 -->
                    <h4 class="profile-title"
                        th:text="${profile.title}">
                    </h4>

                    <!-- 좌하단 -->
                    <div class="profile-meta">
                    <span class="profile-writer"
                          th:text="'작성자: ' + ${profile.writer}">
                    </span>
                        <span class="profile-date"
                              th:text="${#temporals.format(profile.createdDate,'yyyy.MM.dd.')}">
                    </span>
                    </div>

                </div>

                <!-- 오른쪽 썸네일 -->
                <div class="profile-thumb">
                    <img th:src="${profile.thumbnailUrl} ?: '/images/default-thumbnail.png'"
                         alt="profile thumbnail">
                </div>

            </div>
        </div>

        <!-- 프로필 카드가 없을 때 -->
        <div th:if="${profile == null}" class="empty-profile">
            등록된 프로필이 없습니다.
        </div>

    </section>


<section class="user-review-section">

    <span class="user-nickname" th:text="${writer}"></span>
    <span class="review-card-title">님의 작성글 </span>

    <div class="review-card">

        <!-- 글이 없을 때 -->
        <div th:if="${#lists.isEmpty(reviews)}"
             class="empty-reviews">
            작성한 콘텐츠가 없습니다.
        </div>

        <!-- 글 목록 -->
        <ul class="review-list"
            th:if="${!#lists.isEmpty(reviews)}">

            <li th:each="review : ${reviews}"
                class="review-item"
                th:onclick="'location.href=\'/content/post/' + ${review.id} + '\';'">

                <div class="review-title"
                     th:text="${review.title}">
                </div>

                <div class="review-meta">
                    <span th:text="${#temporals.format(review.createdDate,'yyyy.MM.dd')}"></span>
                    · 조회수 <span th:text="${review.viewCount}"></span>
                </div>
            </li>
        </ul>

    </div>

</section>

</div>

<style>

    /* 1. Layout */
    .user-layout {
        display: flex;
        justify-content: center;
        align-items: flex-start;
        gap: 32px;              /* 카드 사이 간격 */
        margin-top: 24px;
    }

    /* =========================
        Global layout wrapper
    ========================= */
    .content-wrapper {
        margin: 0 auto; /* 가운데 */
        padding: 0 24px; /* 좌우 여백 */
    }

    /* 네비 아래 첫 섹션이 너무 붙지 않게 */
    .content-wrapper > :first-child {
        margin-top: 28px;
    }

    /* 2. Header (닉네임) */
    .user-nickname {
        font-size: 28px;
        font-weight: 800;
    }

    .user-suffix {
        font-size: 16px;
        font-weight: 500;
        color: #666;
        margin-left: 6px;
    }

    /* 3. Profile card */
    .profile-card {
        width: 380px;
        height: 180px;
        padding: 16px 18px;
        border: 1px solid #e5e7eb;
        border-radius: 14px;
        background: #fff;
        cursor: pointer;
        transition: box-shadow .2s;
    }

    .profile-card:hover {
        box-shadow: 0 4px 12px rgba(0,0,0,.08);
    }

    .profile-card-inner {
        display: flex;
        height: 100%;
        gap: 14px;
    }

    /* 좌측 텍스트 */
    .profile-text {
        flex: 1;
        display: flex;
        flex-direction: column;
    }

    .profile-title {
        font-size: 16px;
        font-weight: 700;
        color: #222;
        line-height: 1.4;
        margin-bottom: 6px;
    }

    /* 좌하단 고정 핵심 */
    .profile-meta {
        margin-top: auto;
        font-size: 13px;
        color: #666;
        display: flex;
        flex-direction: column;
        gap: 2px;
    }

    /* 우측 썸네일 */
    .profile-thumb {
        width: 110px;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .profile-thumb img {
        width: 100%;
        height: 80px;
        object-fit: cover;
        border-radius: 8px;
    }

    /* 4. Review card */
    .user-review-section {
        width: 560px;
    }

    .user-review-section .review-card {
        width: 560px;
        padding: 22px 24px;
    }

    .user-review-section h3 {
        margin: 0 0 16px;
    }

    .review-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .review-item {
        padding: 14px 4px;
        border-bottom: 1px solid #eee;
        cursor: pointer;
    }

    .review-item:hover {
        background: #f9fafb;
    }

    .review-title {
        font-weight: 600;
        margin: 0 0 6px;
    }

    .review-meta {
        font-size: 13px;
        color: #777;
    }

    .review-card{
        border: 1px solid #e5e7eb;
        border-radius: 14px;
        padding: 22px 24px;
        background: #fff;
    }

    .review-card-title{
        font-size: 16px;
        font-weight: 500;
        color: #666;
        margin-left: 6px;
    }

    .review-item:last-child{
        border-bottom: none;
    }

    /* 5. Empty states */
    .empty-profile,
    .empty-reviews {
        padding: 20px;
        color: #999;
        text-align: center;
    }

    /* 반응형 최소 안전장치 */
    @media (max-width: 1024px) {
        .user-layout {
            flex-direction: column;
            align-items: center;
        }

        .user-profile-section,
        .user-review-section {
            width: 100%;
            max-width: 560px;
        }

        .user-profile-section .profile-card,
        .user-review-section .review-card {
            width: 100%;
        }
    }


</style>

</div>
<!-- 3) footer -->
<th:block th:replace="content/layout/footer :: footer"></th:block>

</body>
</html>
