<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<!-- 1) head -->
<th:block th:replace="content/layout/header :: header"></th:block>

<!-- 2) body ì‹œì‘ -->
<th:block th:replace="content/layout/header :: bodyheader"></th:block>

<!-- ===============================
     ë©”ì¸ ë ˆì´ì•„ì›ƒ
================================= -->
<div class="home-wrapper">

    <!-- ì•½ë ¥ ì†Œê°œ ì„¹ì…˜ -->
    <div class="left-area">
        <div class="section-header">
            <div class="section-title">ì•½ë ¥ ì†Œê°œ</div>
            <a sec:authorize="isAuthenticated()"
               href="/info/info-write"
               class="btn-write">
                âœï¸ ê¸€ì“°ê¸°
            </a>
        </div>

        <div class="content-grid">
            <!-- â­ í•µì‹¬: postsë¥¼ ìˆœíšŒ (sectionsê°€ ì•„ë‹˜!) -->
            <!-- ê¸€ 1ê°œë‹¹ ì¹´ë“œ 1ê°œë§Œ í‘œì‹œ -->
            <div class="post-card"
                 th:each="post : ${posts}"
                 th:onclick="'location.href=\'/info/' + ${post.id} + '\';'"
                 th:attr="data-id=${post.id}">

                <!-- ğŸ”¹ ìƒë‹¨: ì œëª© + ì¸ë„¤ì¼ -->
                <div class="post-main">
                    <!-- ì™¼ìª½ í…ìŠ¤íŠ¸ ì˜ì—­ -->
                    <div class="post-left">
                        <div class="post-title" th:text="${post.title}"></div>
                    </div>

                    <!-- ì˜¤ë¥¸ìª½ ì¸ë„¤ì¼ (PROFILE ì„¹ì…˜ ì´ë¯¸ì§€) -->
                    <div class="post-thumb">
                        <img th:src="${post.thumbnailUrl} ?: '/images/default-thumbnail.png'" alt="thumbnail">
                    </div>
                </div>

                <!-- ğŸ”¹ í•˜ë‹¨: ì‘ì„±ì + ë‚ ì§œ -->
                <div class="post-bottom">
                    <div class="post-extra">
                        <span th:text="'ì‘ì„±ì: ' + ${post.writer}"></span>
                    </div>

                    <div class="post-meta">
                        <span th:text="${#temporals.format(post.createdDate, 'yyyy.MM.dd')}"></span>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- ì‚¬ì´ë“œë°” (ë¹ˆ ê³µê°„ ë˜ëŠ” í–¥í›„ í™•ì¥ìš©) -->
    <aside class="sidebar">
        <div class="section-title">ì•ˆë‚´</div>
        <div class="popular-box" style="padding: 20px; text-align: center; color: #666;">
            <p style="margin: 0; line-height: 1.6;">
                ì•½ë ¥ ì†Œê°œ í˜ì´ì§€ì…ë‹ˆë‹¤.<br>
                ê° ì„¹ì…˜ì„ í´ë¦­í•˜ë©´<br>
                ìƒì„¸ ë‚´ìš©ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </p>
        </div>
    </aside>

</div>

<!-- ===============================
     Style
================================= -->
<style>
    /* === ì„¹ì…˜ í—¤ë” (ì œëª© + ê¸€ì“°ê¸° ë²„íŠ¼) === */
    .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }

    .btn-write {
        padding: 10px 20px;
        background: #4CAF50;
        color: white;
        text-decoration: none;
        border-radius: 6px;
        font-size: 0.9rem;
        font-weight: 600;
        transition: 0.2s;
        display: inline-flex;
        align-items: center;
        gap: 6px;
    }

    .btn-write:hover {
        background: #45a049;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(76, 175, 80, 0.3);
    }

    /* === ì¹´ë“œ ì „ì²´ === */
    .post-card {
        cursor: pointer;
        display: flex;
        flex-direction: column;   /* ìœ„: main, ì•„ë˜: bottom */
        gap: 10px;

        padding: 16px;
        background: #fff;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        margin-bottom: 20px;
        transition: 0.2s ease;
        position: relative;
    }

    .post-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    /* === ìƒë‹¨: ì œëª© + ì¸ë„¤ì¼ === */
    .post-main {
        display: flex;
        justify-content: space-between;
        gap: 18px;
    }

    .post-left {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .post-title {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 6px;
        color: #222;
    }

    /* ì¸ë„¤ì¼ */
    .post-thumb img {
        width: 130px;
        height: 100px;
        object-fit: cover;
        border-radius: 8px;
        flex-shrink: 0;
    }

    /* === í•˜ë‹¨: ì‘ì„±ì + ë‚ ì§œ + ì‚­ì œ ë²„íŠ¼ === */
    .post-bottom {
        display: flex;
        flex-direction: column;
        gap: 6px;
        margin-top: 4px;
    }

    .post-extra {
        font-size: 0.9rem;
        color: #666;
    }

    .post-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.85rem;
        color: #666;
    }

    /* === ê´€ë¦¬ì ë²„íŠ¼ ì˜ì—­ === */
    .admin-buttons {
        display: flex;
        gap: 6px;
    }

    .btn-edit {
        padding: 4px 12px;
        background: #2196F3;
        color: white;
        text-decoration: none;
        border-radius: 4px;
        font-size: 0.8rem;
        cursor: pointer;
        transition: 0.2s;
        display: inline-block;
    }

    .btn-edit:hover {
        background: #0b7dda;
    }

    .btn-delete {
        padding: 4px 12px;
        background: #ff4444;
        color: white;
        border: none;
        border-radius: 4px;
        font-size: 0.8rem;
        cursor: pointer;
        transition: 0.2s;
    }

    .btn-delete:hover {
        background: #cc0000;
    }

    /* === ì‚¬ì´ë“œë°” ì•ˆë‚´ ë°•ìŠ¤ === */
    .popular-box p {
        font-size: 0.9rem;
    }
</style>

<!-- 3) footer -->
<th:block th:replace="content/layout/footer :: footer"></th:block>

</html>